{#
 * ---------------------------------------------------------------------
 * GLPI - Gestionnaire Libre de Parc Informatique
 * Copyright (C) 2015-2018 Teclib' and contributors.
 *
 * http://glpi-project.org
 *
 * based on GLPI - Gestionnaire Libre de Parc Informatique
 * Copyright (C) 2003-2014 by the INDEPNET Development Team.
 *
 * ---------------------------------------------------------------------
 *
 * LICENSE
 *
 * This file is part of GLPI.
 *
 * GLPI is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * GLPI is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with GLPI. If not, see <http://www.gnu.org/licenses/>.
 * ---------------------------------------------------------------------
 #}
{% extends "glpi_page.twig" %}

{% block content %}
   {% include "list_contents.twig" with {'main_header': true, form_header: true} %}
{% endblock %}

{% block javascripts %}
   {% set js_paths = js_paths|default([])|merge([
         js_libs ~ '/jquery-ui/jquery-ui.min.js',
         js_libs ~ '/moment/min/moment-with-locales.min.js'
      ]) %}
   {{ parent() }}
   <script type="text/javascript">
      $(function() {
         $('#default_items').on('click', function() {
            createModalWindow(
               CFG_GLPI.root_doc + '{{ path_for('display-preference', {'itemtype': search_data.itemtype}) }}', {
                  'title': '{{ __('Select default items to show') }}',
                  {#'extraparams': '{{ {'target': path_for('slash')}|json_encode(constant('JSON_FORCE_OBJECT')) }}',#}
                  'open': true
               }
            );
         });
                  {#$search_config_top
                  .= Ajax::createIframeModalWindow('search_config_top',
                                                   $CFG_GLPI["root_doc"].
                                                      "/front/displaypreference.form.php?itemtype=".
                                                      $data['itemtype'],
                                                   ['title'
                                                            => __('Select default items to show'),
                                                         'reloadonclose'
                                                            => true,
                                                         'display'
                                                            => false]);#}
         $('#is_deleted').on('click', function() {
            //onClick="toogle('is_deleted','','','');
            //document.forms['searchform{#$_POST["itemtype"]#}'].submit();"
            toogle('is_deleted','','','');
            $('form#search_form').submit();
         });
         $('#as_map').on('click', function() {
            toogle('as_map','','','');
            //document.forms['searchform{#$data["itemtype"]#}'].submit();
            $('form#search_form').submit();
         });


         /* Botstap magic.. Does not worK.
            $('#search_criteria').boxWidget({
            collapseTrigger: '#toggle_search_criteria',
         });*/
         $('#toggle_search_criteria').on('click', function() {
            $('#search_criteria').toggle();
            $(this)
               .toggleClass('btn-default')
               .toggleClass('btn-primary')
         });
      });
   </script>
{% endblock %}
