  ----------------------------------------------------------------------
GLPI - Gestionnaire libre de parc informatique
 Copyright (C) 2002 by the INDEPNET Development Team.
 Bazile Lebeau, baaz@indepnet.net - Jean-Mathieu Doléans, jmd@indepnet.net
 http://indepnet.net/   http://glpi.indepnet.org
 ----------------------------------------------------------------------
 Based on:
IRMA, Information Resource-Management and Administration
Christian Bauer, turin@incubus.de 

 ----------------------------------------------------------------------
 LICENSE

 This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

 ----------------------------------------------------------------------
 
Contenu :

- Qu'est ce que c'est ?
- Dépendances
- Mise à jour
- Installation
- Configuration
- Test


*************************************************************************************************************
--- Qu'est-ce que c'est ?
*************************************************************************************************************


GLPI est un gestionnaire de parc informatique.
Il permet de recenser et de gérer l'intégralité des composantes matérielles
ou logicielles d'un parc informatique, et ainsi d'optimiser le travail des
techniciens grâce à une maintenance plus cohérente.
Les fonctionnalités principales de l'application s'articulent autour de deux
axes :

1) L'inventaire précis de toutes les ressources techniques, matérielles et
logicielles, existantes dont les caractéristiques seront stockées dans
une base de données.


2) La gestion et l'historisation, des diverses opérations de maintenance et
des procédures liées, réalisées sur ces ressources techniques.

Enfin, cette application a pour but d'être dynamique et directement reliée
aux utilisateurs. Une interface autorise donc ces derniers à éventuellement
prévenir le service de maintenance et à répertorier un problème rencontré
avec l'une des ressources techniques à laquelle ils ont accès.


*************************************************************************************************************
--- Dépendances (uniquement testé avec ces configurations)
*************************************************************************************************************

1) Apache 1.3.>6 with PHP 4 
2) MySQL 3.22 et supperieures


*************************************************************************************************************
--- MISES A JOUR DEPUIS LA VERSION 0.3
*************************************************************************************************************


I) Sauvegarde de votre ancienne configuration :

Avant de faire quoi que ce soit il convient de faire deux choses :

Sauvegardez votre base de donnée via l'interface de sauvegarde de glpi et récupérez le fichier dump contenant les données dans le répertoire backups/dump/ et faites en une sauvegarde.

Récuperez le fichier config.php dans le répertoire glpi/config/ et copiez le ailleurs sur votre disque et faites en une sauvegarde.

A partir de là, si la mise à jour se déroule mal ou que les nouvelles implémentations de la version 0.4 ne vous conviennent pas, il sera facile de revenir à votre version précédente.

Si néanmoins cette procédure se déroulait mal, merci de nous faire parvenir au plus vite sur les mailing listes, ou sur le forum du site du projet, ou sur le bugtrack la procédure utilisée et le message d'erreur que vous obtenez.

II) Récupération et installation des fichiers.


1)Supprimez le répertoire contenant GLPI ainsi que tout son contenu, de votre racine http.

2)Téléchargez le tarball de la version 0.4 disponible dans la rubrique téléchargement du site du projet glpi (http://glpi.indepnet.org).


3)Décompressez la nouvelle archive de GLPI, à la place de l'ancienne.

4)Changez les droits sur les dossiers suivants :

-[votre_racine_http/]glpi/backups/dump
-[votre_racine_http/]glpi/glpi/config/


de manière à ce que PHP y ait les droits décriture.


III)Lancement de la mise à jour :

1) Faites pointer votre navigateur web sur http://votreserveur/glpi/

2) Sélectionnez la langue dans laquelle vous souhaitez effectuer la mise à jour et cliquez sur « ok ».

3) Cliquez sur « mise à jour ».

4) Vérifiez que les tests d'environnement on bien tous été réalisé avec succés, sinon suivez les instructions et re-essayez.

Si tout c'est bien passé, cliquez sur « continuer ».

5)Configurez l'accès au serveur Mysql, aidez vous du fichier config.php que vous avez sauvegardé, pour remplir :
Mysql serveur : le nom d'hote mysql
Mysql user : le nom d'utilisateur mysql
Mysql pass : le mot de passe associé au nom d'utilisateur mysql

Une fois tout ceci fait cliquez sur « continuer »

6) Sélectionnez la base de données que vous souhaitez mettre à jour.
Si vous ne connaissez pas son nom, référez vous au fichier config.php que vous avez sauvegardé, il s'agit du nom se trouvant dans la variable $dbdefault.
Cliquez sur « continuer »

7) Un écran vous demande si vous êtes sûr de vouloir mettre à jour votre base de données, cliquez sur « continuer » si c'est la cas.

8) La mise à jour commence, cela peut prendre un certain temps en fonction de la taille de votre base de données.

IMPORTANT : La mise à jour depuis une version inférieure vers GLPI 0.4 ne vous permet pas de préserver automatiquement vos configurations précises (configurations générales, sources externes, mailing etc etc) qui étaient conservées dans le fichier config.php.

Il vous faudra utiliser les formulaires de configuration post-installation dans le menu « configuration » de l'application.

Ces menus ne sont accessibles qu'a un nouveau type d'utilisateur ajouté dans glpi : le « super-admin », la mise a jour effectue donc automatiquement la conversion « admin »->« super-admin » ou vous permet de créer un utilisateur « super-admin »


A partir de ce moment, plusieurs cas sont possibles en fonction de la version depuis laquelle vous mettez votre base de donnée à jour et de vos anciennes configurations.


CAS 1: Vous aviez des utilisateurs de type « admin », ou qu'au moins un des utilisateurs de type « admin » ne se connectaient pas à l'application depuis des sources externes (ldap,imap) (puisque dans ce cas le mot de passe n'est pas stocké dans la base de données).

Tous vos utilisateurs ayant auparavant les droits « admin » et un mot de passe non vide se retrouvent avec les droits « super-admin », un message vous en informe.

Votre base de données est a jour, vous pouvez désormais configurer GLPI en cliquant sur « utiliser GLPI » et en vous connectant avec l'un des utilisateurs anciennement admin.



CAS 2: Vous n'aviez pas d'utilisateurs de type « admin » ou que tous les « admin » ont un mot de passe vide (puisqu'ils se connectent depuis des sources externes).

Le script vous demande de bien vouloir saisir un nom d'utilisateur et de un mot de passe associé (n'entrez pas le nom d'un utilisateur déjà existant).

Si cette procédure réussi, votre base de données maintenant à jour vous pouvez configurer GLPI en cliquant sur « utilisez GLPI » et en vous connectant avec l'utilisateur que vous venez de créer.

Une fois la configuration terminée, vous pourrez supprimer cet utilisateur. Attention assurez vous qu'il reste toujours un utilisateur « super-admin » ayant la possibilité de se connecter à l'application depuis MySQL, ne serait qu'en cas de problèmes avec les sources de données externes.




*************************************